<!doctype html>
<html lang="en">
<head>
	<title>Airbnb The Price Story</title>
	<meta property="hide-footer-recirc", content="true">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="description" content="How to implement scrollytelling with six different libraries">
	<meta name="news_keywords" content="scrollytelling, scroll-driven, graphics, d3, scrollmagic, waypoints, graph-scoll, scrollstory, in-view">
	<link rel="stylesheet" type="text/css" href="https://cloud.typography.com/7124072/6351572/css/fonts.css" />
	<link rel='stylesheet' href='css/style.css' />
	<link rel='stylesheet' href='graphic.css' />
</head>
<body>
	<main>
		<div class='intro'>
			<h1 class='hed'><a href='../../'>Airbnb in DC, The story of Price </a></h1>
		</div>
		<div class='library'>
			<div class='library__graphic graphic'>
				<div class='graphic__prose'>
					<p class='trigger' data-step='0'>Overview</p>
					<p class='trigger' data-step='1'>Section 1</p>
					<p class='trigger' data-step='2'>Section 2</p>
					<p class='trigger' data-step='2'>Show Maps</p>						
					<p class='trigger' data-step='2'>Conclusions</p>
				</div>
				<div class='graphic__vis'></div>
			</div>
		</div>
	</main>
	<!-- for the graphic -->
	<script src='./d3.v4.min.js'></script>
	<script src='./graphic.js'></script>

	<!-- The scroll library -->
	<!-- https://1wheel.github.io/graph-scroll/ -->
	<script src='graph-scroll.js'></script>	

	<script>
		(function() {
			function graphscroll() {
				// select elements using d3 here since this is a d3 library...
				var graphicEl = d3.select('.graphic')
				var graphicVisEl = graphicEl.select('.graphic__vis')
				var triggerEls = graphicEl.selectAll('.trigger')
				// viewport height
				var viewportHeight = window.innerHeight
				var halfViewportHeight = viewportHeight / 2
				// a global function creates and handles all the vis + updates
				var graphic = createGraphic('.graphic')
				// this is it, graph-scroll handles pretty much everything
				// it will automatically add class names to the elements,
				// so you just need to handle the fixed positions with css
				d3.graphScroll()
					.container(graphicEl)
					.graph(graphicVisEl)
					.sections(triggerEls)
					.offset(halfViewportHeight)
					.on('active', function(i) {
						graphic.update(i)
					})
			}
			graphscroll()
		})()
	</script>
</body>
</html>
